<!DOCTYPE html>
<html 
    xmlns="http://www.w3c.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui">
    
    <h:head>
        <title>
            all-tables
        </title>
    </h:head>
    
    <h:body>

        <h1>list of all tables</h1>
        
        <p:growl id="growl" showDetail="true" sticky="true" autoUpdate="true" />

        <h:form>
        
            <p:selectOneMenu value="#{allTables.database}">  
                <f:selectItem itemLabel="Select database" itemValue="" />  
                <f:selectItems value="#{allTables.databases}" />  
                  
                <p:ajax event="change" update="tables" />  
            </p:selectOneMenu>  

            <p:accordionPanel id="tables" var="table" value="#{allTables.tables}">
        
                <p:tab title="#{table.name}">
                    <p:dataTable 
                            id="table" var="row" 
                            value="#{allTables.data(table)}">
                        <p:columns 
                                value="#{table.columnTypeNames}" 
                                var="column" columnIndexVar="colIndex">
                            <f:facet name="header">
                                Column \##{colIndex}: #{column}
                            </f:facet>
                            
                            #{row.row[colIndex].value}
                        </p:columns>
                    </p:dataTable>
                </p:tab>
            
            </p:accordionPanel>
        
        </h:form>

    </h:body>

</html>